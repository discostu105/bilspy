



<div class="main-nav">
    <div class="navbar navbar-inverse">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">bilspy</a>
        </div>
        <div class="clearfix"></div>
        <div class="navbar-collapse collapse">

            <form onsubmit="startUpload(); return false;" enctype="multipart/form-data">
                <div class="form-group file-upload-wrap">
                    <input type="file" class="form-control file-upload-input" onchange="handleFileSelect(this.files);" accept=".dll,.DLL,.exe,.EXE,.txt" />
                    <div class="drag-text">
                        <h3>Drag and drop a file or select add file</h3>
                    </div>
                </div>
            </form>

            <div>filecount: @files.Count()</div>
            <div>lastfilename: @lastfilename</div>
            <div>lastdata: @lastdata</div>

            <ul class="nav navbar-nav">
                <li>
                    <NavLink href="/code">
                        <span class="glyphicon glyphicon-education"></span> Code
                    </NavLink>
                </li>
            </ul>
        </div>
    </div>
</div>

@functions {

List<string> files = new List<string>();

string lastfilename = "";
string lastdata = "";

protected override Task OnInitAsync() {
    files.Add("test.dll");
    return base.OnInitAsync();
}

void OnChange(UIEventArgs eventArgs) {
    var changeEventArgs = (UIChangeEventArgs)eventArgs;
    var filepath = changeEventArgs.Value.ToString();
    files.Add(filepath);
    lastfilename = filepath;
    try {
        lastdata = System.IO.File.ReadAllText(filepath);
    } catch (Exception e) {
        Console.WriteLine("error: " + e.ToString());
    }
}

void AddFiles() {
    //lastinput = files.Count().ToString();
    //foreach (var file in files) {
    //    this.files.add(file);
    //    console.writeline(file);
    //}
    //return "true";
}

}